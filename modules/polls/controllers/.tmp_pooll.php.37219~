<?php
class Pooll extends Public_Controller {

	function __construct()
	{
		parent::__construct();	
		$this->load->model('pooll_model','pooll');
		$this->load->model('poolldetail_model','detail');
	}
	
	function index()
	{
		$data['breadcrumb'] = breadcrumb(array('herb' => 'สมุนไพร'));
		if(isset($_GET['search'])) $this->herb->where('name like \'%'.$_GET['search'].'%\' ');
		$data['result'] = $this->herb->limit(10)->sort('name')->order('asc')->get();
		$data['pagination'] = $this->herb->pagination();
		$this->template->build('herb_index',$data);
	}
	
	function view($id)
	{
		$data['rs'] = $this->herb->get_row($id);
		$data['breadcrumb'] = breadcrumb(array('herb' => 'สมุนไพร','herb/view/'.$id => $data['rs']['name']));
		$this->template->build('herb_view',$data);
	}
	
	function index_inc()
	{
		
		$data['rs'] = $this->pooll->get_row($this->db->getone('select max(id) from poolls'));
		$data['result'] = $this->detail->where('parent = '.$data['rs']['id'])->get();
		$this->load->view('pooll_inc',$data);
		
	}
	
	
}